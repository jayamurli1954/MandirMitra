
In temples sevas are performed based on devotees birth star day. How to find the future star or rather counter clerk helping the devotee to find the date matching the star for booking the seva

we also need to find dates for coming Ekadashi as well Sankashta Chathurthi and Pradosha can we we have a easy calendar for all these like stars, Ekadashi, Sankashta Chathurthi and Pradosha

we need a simple calendar we already have panchang in our MandirMitra Project now these dates are like a ready reckoner in case some devotee asks the counter clerk and check and readily help in finding it is something like a widget in the dashboard so he can tell user/clerk key in some data or it is readily available for display without going thru any laborious method to find all these
EVENTS TO BE COVERED
Code	Event
NAK	Nakshatra (Today + Next occurrence of selected star)
EK	Ekadashi
SK	Sankashta Chaturthi
PR	Pradosha
PM	Pournami
AM	Amavasya
or any other importntant date/festival


yes do all of the above as I am taking the help of Cursor ai t build so if you make complete note then it will be easier for cursor to build on it or even enhance it

we have one note herebelow you can review and suggest


# ğŸ›• MandirMitra â€“ Devotee Ready-Reckoner Dashboard Widget

**(Authoritative Implementation Note for Cursor AI)**

---

## 1. OBJECTIVE (VERY CLEAR)

Build a **simple, fast, zero-confusion dashboard widget** that allows a **temple counter clerk** to instantly answer common devotee questions like:

* â€œWhen is my next **star**?â€
* â€œWhen is the **next Ekadashi**?â€
* â€œNext **Sankashta Chaturthi**?â€
* â€œIs there **Pradosha / Amavasya / Pournami**?â€

WITHOUT:

* Opening full Panchang
* Reading timings
* Doing calculations
* Astrology knowledge

This widget is a **READY RECKONER**, not a Panchang.

---

## 2. WHAT THIS WIDGET IS (AND IS NOT)

### âœ… IS

* A **summary / cache** of upcoming sacred dates
* Always shows **ONE clear calendar date per event**
* Uses **existing Panchang engine** in MandirMitra
* Optimized for **counter speed**

### âŒ IS NOT

* A Panchang replacement
* A tithi/nakshatra timing calculator
* A screen showing start/end times
* A screen requiring user inputs

---

## 3. EVENTS TO BE COVERED (V1 â€“ FINALIZED)

### Core Events (Must Show)

| Code | Event                                                |
| ---- | ---------------------------------------------------- |
| NAK  | Nakshatra (Today + Next occurrence of selected star) |
| EK   | Ekadashi                                             |
| SK   | Sankashta Chaturthi                                  |
| PR   | Pradosha                                             |
| PM   | Pournami                                             |
| AM   | Amavasya                                             |

(Expandable later)

---

## 4. ASSIGNMENT RULES (NON-NEGOTIABLE)

> **These rules decide the DATE shown. No exceptions.**

### Nakshatra

* Assign to the date when **main temple seva time** (e.g., morning Abhishekam) occurs.
* Never show two dates.

### Ekadashi

* Date on which **Ekadashi tithi exists at sunrise**.

### Sankashta Chaturthi

* Date on which **Krishna Chaturthi has Moonrise**.

### Pradosha

* Date on which **Trayodashi exists during evening (Pradosha Kala)**.

### Pournami / Amavasya

* Date when respective tithi exists at sunrise.

ğŸ‘‰ **All timing logic remains backend-only.**

---

## 5. DATA FLOW (IMPORTANT FOR CURSOR)

### High-Level Flow

```
Panchang Engine (already exists)
        â†“
Daily Background Job (00:05 AM)
        â†“
Sacred Events Cache Table
        â†“
Dashboard Widget (Read-only)
```

âœ” Widget NEVER computes
âœ” Widget NEVER calls Panchang directly

---

## 6. DATABASE DESIGN (SIMPLE & FAST)

### Table: `sacred_events_cache`

```sql
id                BIGINT PK
temple_id         BIGINT
event_code        VARCHAR(10)   -- EK, SK, PR, PM, AM, NAK
event_name        VARCHAR(50)
event_date        DATE
weekday           VARCHAR(10)
extra_info        VARCHAR(100)  -- Optional (e.g. Star name)
valid_from        DATE
valid_to          DATE
created_at        TIMESTAMP
updated_at        TIMESTAMP
```

### Example Rows

```
EK | Ekadashi | 2026-03-11 | Wed
SK | Sankashta Chaturthi | 2026-03-10 | Tue
PR | Pradosha | 2026-03-12 | Thu
PM | Pournami | 2026-03-15 | Sun
AM | Amavasya | 2026-03-29 | Sun
NAK | Anuradha Star | 2026-03-05 | Thu
```

---

## 7. BACKEND JOB (CRITICAL)

### Job Name

`GenerateSacredEventsCacheJob`

### Frequency

* Once per day (after midnight)
* Or on demand (admin trigger)

### Responsibilities

* Compute **next 30â€“60 days**
* Insert / update cache
* Delete expired entries

### Pseudocode (for Cursor)

```
for each temple:
    compute upcoming sacred events using Panchang
    apply assignment rules
    store ONE date per event
    update cache
```

---

## 8. API CONTRACT (READ-ONLY)

### Endpoint

```
GET /api/dashboard/sacred-events
```

### Response (Final Format)

```json
{
  "today_nakshatra": "Anuradha",
  "events": [
    { "code": "NAK", "label": "Anuradha Star", "date": "2026-03-05", "day": "Thu" },
    { "code": "EK", "label": "Ekadashi", "date": "2026-03-11", "day": "Wed" },
    { "code": "SK", "label": "Sankashta Chaturthi", "date": "2026-03-10", "day": "Tue" },
    { "code": "PR", "label": "Pradosha", "date": "2026-03-12", "day": "Thu" },
    { "code": "PM", "label": "Pournami", "date": "2026-03-15", "day": "Sun" },
    { "code": "AM", "label": "Amavasya", "date": "2026-03-29", "day": "Sun" }
  ]
}
```

---

## 9. FRONTEND UI SPEC (REACT + MUI)

### Widget Title

**ğŸ›• Upcoming Sacred Days**

### Layout (Exact)

```
-------------------------------------
ğŸ›• Upcoming Sacred Days
-------------------------------------
â­ Todayâ€™s Nakshatra: Anuradha

ğŸ“… Next Important Days
â€¢ â­ Anuradha Star        â†’ 05 Mar (Thu)
â€¢ ğŸŒ™ Ekadashi            â†’ 11 Mar (Wed)
â€¢ ğŸ˜ Sankashta Chaturthi â†’ 10 Mar (Tue)
â€¢ ğŸ”± Pradosha            â†’ 12 Mar (Thu)
â€¢ ğŸŒ• Pournami            â†’ 15 Mar (Sun)
â€¢ ğŸŒ‘ Amavasya            â†’ 29 Mar (Sun)

[ View Monthly Calendar ]
-------------------------------------
```

### UI RULES

* No times
* No astrology terms
* No user inputs
* Icons fixed
* Dates bold

---

## 10. OPTIONAL QUICK LOOKUP (SAFE & SIMPLE)

```
ğŸ” Find Next Occurrence
[ Select Event â–¼ ]  [ Show ]
```

Dropdown values:

* My Star
* Ekadashi
* Sankashta
* Pradosha
* Pournami
* Amavasya

Output:

```
Next Ekadashi â†’ 11 March 2026 (Wed)
```

---

## 11. ADMIN CONFIG (MINIMAL)

```
Enable in Ready-Reckoner:
â˜‘ Nakshatra
â˜‘ Ekadashi
â˜‘ Sankashta
â˜‘ Pradosha
â˜‘ Pournami
â˜‘ Amavasya
```

No astrology exposed.

---

## 12. PERFORMANCE & UX GUARANTEES

* Widget load time < 200ms
* No dependency on Panchang runtime
* Works offline if cache exists
* Zero training required for clerk

---

## 13. CLERK SOP (1 LINE â€“ DISPLAYABLE)

> â€œCheck the â€˜Upcoming Sacred Daysâ€™ box on dashboard and read out the date.â€

---

## 14. WHY THIS IS THE RIGHT DESIGN

âœ” Solves real counter problems
âœ” Uses Panchang without exposing complexity
âœ” Prevents double-date confusion
âœ” Cursor-friendly (clear inputs & outputs)
âœ” Easy to extend (festivals, temple events)

---

## 15. WHAT TO TELL CURSOR AI (COPY THIS)

> â€œBuild a MandirMitra dashboard widget called â€˜Upcoming Sacred Daysâ€™ using a cached API. Do not compute Panchang in UI. Follow the provided event assignment rules strictly and show only one date per event.â€

---

If you want, next I can:

* Convert this into **Cursor-optimized prompt**
* Generate **backend code skeleton (FastAPI / Node)**
* Generate **React + MUI component code**
* Create **monthly printable A4 calendar auto-generated from cache**

Just tell me what you want next.
